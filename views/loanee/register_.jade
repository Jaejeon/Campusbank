//new product register (loanee)

extends ../layout_

block content
  link(rel='stylesheet', href='/stylesheets/loanee/register_.css')
  .container
    .container_center
      .sub_container1
        h5 대출금액 설정하기
        h6(style='padding-left:0px;text-align:center;') (단위금액: 50만원)
        .selection_box
          p 대출 희망 금액</br>(1천만원 한도)
          span  만원
          select(name='v1', id='v1')
            option(value='0')
        .selection_box
          p 대출 희망 최소 금액</br>(50만원 최소)
          span  만원
          select(name='v2', id='v2')
            option(value='0')
          .cal_box
            h6 총 채권 수
            input(id='min_bond', type='text', value='', readonly='true')
            p 만원 :
            input(id='num_constant',type='text', value='', readonly='true')
            p 카드
            p </br> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp50 만원 :
            input(id='num_bond', type='text', value='0', readonly='true')
            p 카드
      .sub_container2
        h5 대출기간 설정하기
        h6 </br> 대출형태: 거치 후 원리금 균등분할 상환
        .selection_box
          p 거치기간</br>(이자만 지불하는 기간)
          select(id='grace_year')
            option(value='0')
            option(value='0') 0년
            option(value='1') 1년
            option(value='2') 2년
            option(value='3') 3년
            option(value='4') 4년
        .selection_box
          p 상환기간</br>(이자와 원금을 모두 지불하는 기간)
          select(id='payback_year')
            option(value='0')
            option(value='0') -----
        p 거치기간과 상환기간의 합은 최소 1년이며, 최대 5년을 넘지 못합니다.</br>
        p 거치기간과 상환기간이 길어질수록 금리가 높아질 수 있습니다.</br>
        p 또한 거치기간과 상환기간이 길어질 경우, 투자자의 관심도가 낮아져 대출을 받기까지 기간이 길어질 수 있습니다.


      .sub3sub4
        .sub_container3
          h5 대출방법 설정하기
          .selection_box
            input(type='radio', name='checkbox_sub1', value='투자자 기다리기')
            p 투자자 기다리기
          .selection_box
            input(type='radio', name='checkbox_sub1', value='즉시대출')
            p 즉시대출
          p 즉시대출을 받을 경우, 투자자를 기다릴 필요 없이 서류인증이 완료되는 당일 입금이 완료됩니다.
          p 단, 즉시대출의 경우 금리가 인상되니 아래 카드의 변경된 금리를 반드시 참고하여 진행하시기 바랍니다.

        .sub_container4
          h5 대출목적 설정하기
          select(id='select_purpose')
            option(value='null')
            option(value='purpose1') 생활비
            option(value='purpose2') 보증금
            option(value='etc') 기타
          input(type='text', id='purpose_text')

      .sub_container5
        .fragment1
          p 만기
          input(type='text', value=' ', id='exp_year', readonly='true')
          p 년
        .fragment2
          input(type='text', value=' ', id='total_money', readonly='true')
          p 만원

  script.
    /*-----------------------.sub_container1 display handler START-----------------------------*/
    $('#grace_year').change(function(){
      if(parseInt(parseInt(document.getElementById('grace_year').value) + parseInt(document.getElementById('payback_year').value)) <= 5)
      {
        document.getElementById('exp_year').value = parseInt(document.getElementById('grace_year').value) +
                parseInt(document.getElementById('payback_year').value);
      }
      else{
        alert('기간을 재입력 해주세요.(거치기간과 상환기간은 합산 5년을 넘을 수 없습니다.)')
      }
    });

    $('#payback_year').change(function(){
      if(parseInt(parseInt(document.getElementById('grace_year').value) + parseInt(document.getElementById('payback_year').value)) <= 5)
      {
        document.getElementById('exp_year').value = parseInt(document.getElementById('grace_year').value) +
                parseInt(document.getElementById('payback_year').value);
      }
      else{
        alert('기간을 재입력 해주세요.(거치기간과 상환기간은 합산 5년을 넘을 수 없습니다.)')
      }
    });
    /*-----------------------.sub_container1 display handler END-----------------------------*/


    /*-----------------------.sub_container3 event handler START---------------------------*/
    $('#grace_year').change(function(){
      document.getElementById('payback_year').value = null;

      for(i = document.getElementById('payback_year').options.length -1; i >= 0; i--){
        document.getElementById('payback_year').options[i] = null;
      }

      var option = document.createElement('option');
      option.text = '';
      option.value = 0;
      document.getElementById('payback_year').add(option);

      for(i = 1; i <= 5 - document.getElementById('grace_year').value; i++){
        option = document. createElement('option');
        option.text = i + '년';
        option.value = i;
        document.getElementById('payback_year').add(option);
      }
    });
    /*-----------------------.sub_container3 event handler END---------------------------*/


    /*-----------------------.sub_container4 event handler START--------------------------*/
    $('#v1').change(function(){
      document.getElementById('v2').value = null;

      document.getElementById('num_bond').value =
              (document.getElementById('v1').value - document.getElementById('v2').value)/50;
      document.getElementById('total_money').value = document.getElementById('v1').value;

      for(i = document.getElementById('v2').options.length -1; i >= 0; i--){
        document.getElementById('v2').options[i] = null;
      }

      var option = document.createElement('option');
      option.text = '';
      option.value = 0;
      document.getElementById('v2').add(option);

      for(i = 1; i < (document.getElementById('v1').value/50) + 1; i++){
        option = document.createElement('option');
        option.text = ''+ i*50;
        option.value = i*50;
        document.getElementById('v2').add(option);
      }

      if(document.getElementById('v2').value != '0') {
        document.getElementById('num_constant').value = '1';
        document.getElementById('min_bond').value = document.getElementById('v2').value;
      }
      else  {
        document.getElementById('num_constant').value = '';
        document.getElementById('min_bond').value = '';
      }

      document.getElementById('num_bond').value =
              (document.getElementById('v1').value - document.getElementById('v2').value)/50;

    });

    $('#v2').change(function(){
      if(document.getElementById('v2').value != '0') {
        document.getElementById('num_constant').value = '1';
        document.getElementById('min_bond').value = document.getElementById('v2').value;
      }
      else  {
        document.getElementById('num_constant').value = '';
        document.getElementById('min_bond').value = '';
      }

      document.getElementById('num_bond').value =
              (document.getElementById('v1').value - document.getElementById('v2').value)/50;
    });
    /*-----------------------.sub_container4 event handler END--------------------------*/


    /*-----------------------.sub_container5 event handler START--------------------------*/
    $('#select_purpose').change(function(){
      if(document.getElementById('select_purpose').value == 'etc')  document.getElementById('purpose_text').disabled = false;
      else document.getElementById('purpose_text').disabled = true;
    });
    /*-----------------------.sub_container5 event handler END----------------------------*/

    //v1 menu initialize
    for(i = 1; i < 21; i++){
      var option = document.createElement('option');
      option.text = ''+i*50;
      option.value = i*50;
      document.getElementById('v1').add(option);
    }

    document.getElementById('purpose_text').disabled = true;